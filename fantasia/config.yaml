# ==========================
# üåç Global Configuration
# ==========================

# Maximum number of worker threads for parallel processing.
max_workers: 3

# Path to the system constants file.
constants: "./fantasia/constants.yaml"

# Monitoring interval in seconds (for processes that require periodic checks).
monitor_interval: 10

# Debug Feature
# Activated only when 'limit_entry' is set. Limits the number of input samples processed
# and builds the lookup table using at most 'limit_entry' vectors.

limit_entry: 1000

log_path: ~/fantasia/fantasia.log

# ==========================
# üóÑÔ∏è Database (PostgreSQL)
# ==========================

# Credentials and configuration for connecting to the PostgreSQL database.
DB_USERNAME: usuario         # Database username.
DB_PASSWORD: clave           # Database password.
DB_HOST: localhost           # Host where the database server is running.
DB_PORT: 5432                # Port used for the database connection.
DB_NAME: BioData             # Name of the database to use.


# ==========================
# üì® Message Queue (RabbitMQ)
# ==========================

# Configuration for the RabbitMQ message broker.
rabbitmq_host: localhost     # RabbitMQ server hostname.
rabbitmq_port: 5672         # RabbitMQ server port.
rabbitmq_user: guest         # RabbitMQ username for authentication.
rabbitmq_password: guest     # RabbitMQ password for authentication.


# ====================================================================
# üîÑ Data Source Configuration
# ====================================================================

# This configuration file supports the initialization and execution of
# the FANTASIA pipeline. Below are two options for selecting the
# embeddings database used as a reference during the annotation step.
#
# ‚û§ DEFAULT (used if no override is provided):
#   UniProt 2024 + GOA full dump
#   - File URL: https://zenodo.org/records/14864851/files/uniprot_embeddings_goa_2024_with_2022_tags.tar?download=1
#   - Zenodo page: https://zenodo.org/records/14864851
#
# ‚û§ ALTERNATIVE (benchmark mode):
#   GoPredSim 2022
#   - File URL: https://zenodo.org/records/15095845/files/embeddings_fantasia_gopredsim_2022.dump?download=1
#   - Zenodo page: https://zenodo.org/records/15095845
#
# You can override the default during initialization using:
#   --embeddings_url <ZENODO_URL>
# ====================================================================
# URL to download the embeddings database dump.
embeddings_url: "https://zenodo.org/records/14864851/files/uniprot_embeddings_goa_2024_with_2022_tags.tar?download=1"


# ==========================
# üìÇ Directory Configuration
# ==========================

base_directory: ~/fantasia/

# ==========================
# üî¨ Pipeline Configuration
# ==========================

# Path to the input FASTA file for protein sequences.
input: data_sample/worm_test.fasta

# Batch size for Embedding Distance calculation - [batch_size,length(lookup_table)]
batch_size: 100

# K-closest protein to consider for lookup
limit_per_entry: 1

# Prefix for output file names.
fantasia_prefix: worm_test_Prot_100_1.2

# Threshold for sequence length filtering.
length_filter: 5000000

# Threshold for redundancy filtering.
redundancy_filter: 0

# Number of sequences to package in each queue batch.
sequence_queue_package: 64

delete_queues: True

# ==========================
# üß¨ Embedding Configuration:
# this config is for run a test using only ProtT5 using euclidean distance at k=1. Modify paramenters accordingly.
# ==========================

embedding:
  device: "cuda"  # options: "cuda" or "cpu"
  distance_metric: "<->"  # options: "<=>" (cosine) or "<->" (euclidean)
  models:
    esm:
      enabled: False           # üîπ Enable or disable  the ESM model. Options: "True" or "False".
      distance_threshold: 2  # üîπ Distance threshold for the ESM model
      batch_size: 32           # üîπ Batch size for processing sequences in ESM
    prost_t5:
      enabled: False           # üîπ Enable or disable the Prost model. Options: "True" or "False".
      distance_threshold: 2  # üîπ Distance threshold for the Prost model
      batch_size: 32           # üîπ Batch size for processing sequences in Prost
    prot_t5:
      enabled: True           # üîπ Enable or disable the Prot model. Options: "True" or "False".
      distance_threshold: 2  # üîπ Distance threshold for the Prot model
      batch_size: 32           # üîπ Batch size for processing sequences in Prot

# ==========================
# üß† Functional Analysis
# ==========================

# Enable or disable the use of TopGO formatting output for Gene Ontology enrichment analysis. Options: "True" or "False".
topgo: True
